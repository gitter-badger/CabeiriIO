cmake_minimum_required (VERSION 2.6)
project (Cabeiri_Firmware)

# The version number.
set (Cabeiri_Firmware_VERSION_MAJOR 0)
set (Cabeiri_Firmware_VERSION_MINOR 1)

option(AVR
  "Compile for avr platform" ON)

# configure a header file to pass some of the CMake settings
# to the source code
configure_file (
  "${PROJECT_SOURCE_DIR}/configs.h.in"
  "${PROJECT_BINARY_DIR}/configs.h"
  )

# add the binary tree to the search path for include files
# so that we will find configs.h
include_directories ("${PROJECT_BINARY_DIR}")

# generate and add intermediate code
include_directories ("${PROJECT_SOURCE_DIR}/MathFunctions")
add_subdirectory (MathFunctions)
set (EXTRA_LIBS ${EXTRA_LIBS} MathFunctions)

# add the executable
if (AVR)
    add_executable (Cabeiri_Firmware "${PROJECT_BINARY_DIR}src/avr/main.avr.cpp")
endif(AVR)

target_link_libraries (Tutorial  ${EXTRA_LIBS})

# add the install targets
install (TARGETS Tutorial DESTINATION bin)
install (FILES "${PROJECT_BINARY_DIR}/configs.h"
         DESTINATION include)
